
<%- include ('../system/header') %>

<h1>Lépések</h1>
<% if (error) { session.error = error; session.severity = severity; } %>
<%- include ('../system/message') %>

<div class="d-flex justify-content-between align-items-center my-3">
  <a href="/steps/new" class="btn btn-sm btn-outline-secondary">Új napi lépésszám</a>
  <div class="text-end">
    <strong>Összes lépés:</strong> <%= totalSteps %>
  </div>
</div>

<% if (steps.length === 0) { %>
  <div>Jelenleg nincsenek rögzített lépések.</div>
<% } else { %>
  <table class="table table-hover table-striped align-middle">
    <thead>
      <tr>
        <th>#</th>
        <th>Dátum</th>
        <th>Lépésszám</th>
        <th>Heti összes</th>
        <th class="text-end">Műveletek</th>
      </tr>
    </thead>
    <tbody>
      <% steps.forEach((item, index) => { %>
        <tr>
          <td><%= index + 1 %></td>
          <td><%= item.date %></td>
          <td><%= item.steps %></td>
          <td><%= weekMap[item.weekKey] %></td>
          <td class="text-end">
            <a href="/steps/edit/<%= item.id %>" class="btn btn-sm me-2"><u>Szerkesztés</u></a>
            <a href="/steps/delete/<%= item.id %>" class="btn btn-sm text-danger"><u>Törlés</u></a>
          </td>
        </tr>
      <% }) %>
    </tbody>
  </table>
<% } %>

<%- include ('../system/footer') %>
